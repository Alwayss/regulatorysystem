<section id="page-title">
  <div class="row">
    <div class="col-sm-8">
      <h3 class="mainTitle"><span class="fa fa-search-plus margin-right-20"></span>项目详情</h3>
    </div>
  </div>
</section>
<div class="container-fluid container-fullw bg-white">
  <div class="row">
    <div class="col-lg-10 col-md-12 col-lg-offset-1">
      <form role="form" class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-3 control-label">项目编号</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" ng-model="project.guid" ng-disabled="checked">
          </div>
          <div class="col-sm-4">
            <a class="padding-top-10 display-table addFn" uib-tooltip-template="'projectTemplate.html'"
               tooltip-placement="right" tooltip-trigger="'mouseenter'">生成二维码</a>
          </div>
          <div class="col-sm-4">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">项目名称</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" ng-model="project.name" ng-disabled="checked">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">项目所在地区</label>
          <div class="col-sm-8">
            <div>
              <label class="col-sm-2 control-label padding-left-0 text-center padding-right-25">
                区域
              </label>
              <select class="col-sm-4 project-select" ng-model="area" ng-change="getDistrict()"
                      ng-options="option.name for option in districts" ng-disabled="checked">
                <option value="">请选择区域</option>
              </select>
              <label class="col-sm-2 control-label">
                地级市
              </label>
              <select class="col-sm-4 project-select" ng-model="city" ng-options="option.name for option in cities"
                      ng-disabled="checked"><option value="">请选择地级市</option>
              </select>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">项目负责人</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" ng-model="project.principal" ng-disabled="checked">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">项目进度</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" ng-model="project.progress" ng-disabled="checked">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">合同编号</label>
          <div class="col-sm-4">
            <input type="text" class="form-control" ng-model="contract.guid" ng-disabled="checked">
          </div>
          <div class="col-sm-4">
            <a class="padding-top-10 display-table addFn" uib-tooltip-template="'contractTemplate.html'"
               tooltip-placement="right" tooltip-trigger="'mouseenter'">生成二维码</a>
          </div>
          <div class="col-sm-4">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">合同名称</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" ng-model="contract.name" ng-disabled="checked">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">委托方</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" ng-model="contract.client" ng-disabled="checked">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">合同工作量</label>
          <div class="col-sm-8">
            <div class="col-sm-12 padding-left-0 padding-right-0" ng-repeat="test in contract.planWork">
              <div class="col-sm-4 padding-left-0">
                <input type="text" class="form-control height-30 text-small" ng-model="test.name" ng-disabled="checked">
              </div>
              <div class="col-sm-8 padding-right-0 min-width-600">
                <div ng-show="test.type == '1'">
                  <div class="radio clip-radio radio-primary inline-block">
                    <input type="radio" id="radio-{{$index}}-1" name="type{{$index}}" value="1"
                           ng-disabled="true" ng-model="test.type">
                    <label for="radio-{{$index}}-1">按检测数量</label>
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" class="form-control text-small height-30" ng-disabled="checked"
                           ng-model="test.num">
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" class="form-control text-small height-30"
                           ng-model="test.numPrice" ng-disabled="checked">
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div ng-show="test.type == '2'">
                  <div class="radio clip-radio radio-primary inline-block">
                    <input type="radio" id="radio-{{$index}}-2" name="type{{$index}}" value="2"
                           ng-disabled="true" ng-model="test.type">
                    <label for="radio-{{$index}}-2">按试验荷载</label>
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="试验吨数" class="form-control text-small height-30"
                           ng-model="test.ton" ng-disabled="checked">
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="单价" class="form-control text-small height-30"
                           ng-model="test.tonPrice" ng-disabled="checked">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role == 'builder' && contract.factWork">
          <label class="col-sm-3 control-label">实际工作量</label>
          <div class="col-sm-8">
            <div class="col-sm-12 padding-left-0 padding-right-0" ng-repeat="test in contract.factWork">
              <div class="col-sm-4 padding-left-0">
                <input type="text" class="form-control height-30 text-small" ng-model="test.name" ng-disabled="checked">
              </div>
              <div class="col-sm-8 padding-right-0 min-width-600">
                <div ng-show="test.type == '1'">
                  <div class="radio clip-radio radio-primary inline-block">
                    <input type="radio" id="radios-fact-{{$index}}-1" name="type{{$index}}" value="1"
                           ng-disabled="true" ng-model="test.type">
                    <label for="radios-fact-{{$index}}-1">按检测数量</label>
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" class="form-control text-small height-30" ng-disabled="checked"
                           ng-model="test.num">
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" class="form-control text-small height-30"
                           ng-model="test.numPrice" ng-disabled="checked">
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div ng-show="test.type == '2'">
                  <div class="radio clip-radio radio-primary inline-block">
                    <input type="radio" id="radios-fact-{{$index}}-2" name="type{{$index}}" value="2"
                           ng-disabled="true" ng-model="test.type">
                    <label for="radios-fact-{{$index}}-2">按试验荷载</label>
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="试验吨数" class="form-control text-small height-30"
                           ng-model="test.ton" ng-disabled="checked">
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="单价" class="form-control text-small height-30"
                           ng-model="test.tonPrice" ng-disabled="checked">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role != 'builder'">
          <label class="col-sm-3 control-label">实际工作量</label>
          <div class="col-sm-8">
            <div>
              <div class="col-sm-6 padding-left-0">
                <ui-select ng-model="test.selected" theme="select2" title="请选择">
                  <ui-select-match placeholder="请选择">{{$select.selected.name}}</ui-select-match>
                  <ui-select-choices repeat="item in selectList">
                    <div ng-bind-html="item.name | highlight: $select.search"></div>
                  </ui-select-choices>
                </ui-select>
              </div>
              <div class="col-sm-6"><a ng-click="addTestFn()" class="padding-top-10 display-table addFn">添加检测方法</a></div>
              <div class="clearfix"></div>
            </div>
            <div class="margin-top-10 col-sm-12 padding-left-0 padding-right-0" ng-repeat="item in testers">
              <div class="col-sm-4 padding-left-0 margin-top-10">
                <input type="text" class="form-control height-30 text-small" ng-model="item.name" placeholder="检测方法名称">
              </div>
              <div class="col-sm-8 padding-right-0 min-width-600">
                <div>
                  <div class="radio clip-radio radio-primary inline-block">
                    <input type="radio" id="radio-fact-{{$index}}-1" name="type{{$index}}" value="1"
                           ng-model="item.type">
                    <label for="radio-fact-{{$index}}-1">按检测数量</label>
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="检测数量(单位：根或点)" class="form-control text-small height-30"
                           ng-model="item.num">
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="单价" class="form-control text-small height-30"
                           ng-model="item.numPrice">
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div>
                  <div class="radio clip-radio radio-primary inline-block">
                    <input type="radio" id="radio-fact-{{$index}}-2" name="type{{$index}}" value="2" ng-model="item.type">
                    <label for="radio-fact-{{$index}}-2">按试验荷载</label>
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="试验吨数" class="form-control text-small height-30" ng-model="item.ton">
                  </div>
                  <div class="margin-left-0 margin-right-0 inline-block">
                    <input type="text" placeholder="单价" class="form-control text-small height-30" ng-model="item.tonPrice">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role != 'builder'">
          <label class="col-sm-3 control-label">合同金额</label>
          <div class="col-sm-8">
            <div class="input-group">
              <span class="input-group-addon"> <i class="fa fa-cny"></i> </span>
              <input type="number" class="form-control" ng-focus="getAmount()" ng-model="contract.contractAmount"
                     ng-disabled="checked">
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role != 'builder'">
          <label class="col-sm-3 control-label">应收款</label>
          <div class="col-sm-8">
            <div class="input-group">
              <span class="input-group-addon"> <i class="fa fa-cny"></i> </span>
              <input type="number" class="form-control" ng-focus="getAmount()" ng-model="contract.receivable"
                     ng-disabled="checked">
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role == 'admin' || role == 'leader' || role == 'clerk'">
          <label class="col-sm-3 control-label">已收款</label>
          <div class="col-sm-8">
            <div class="input-group">
              <span class="input-group-addon"> <i class="fa fa-cny"></i> </span>
              <input type="number" class="form-control" ng-model="contract.receipt" ng-disabled="checked">
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role != 'builder'">
          <label class="col-sm-3 control-label">未收款</label>
          <div class="col-sm-8">
            <div class="input-group">
              <span class="input-group-addon"> <i class="fa fa-cny"></i> </span>
              <input type="number" class="form-control" ng-model="contract.unreceivable" ng-disabled="checked">
            </div>
          </div>
        </div>
        <div class="form-group" ng-show="role != 'builder'">
          <label class="col-sm-3 control-label">收款时间</label>
          <div class="col-sm-4">
            <p class="input-group">
              <input type="text" class="form-control" uib-datepicker-popup ng-model="dt" is-open="popup.opened"
                     datepicker-options="dateOptions" ng-required="true" close-text="关闭" clear-text="清除"
                     current-text="今天" ng-disabled="checked"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open()">
                  <i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </p>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">备注</label>
          <div class="col-sm-8">
            <textarea class="form-control" ng-model="project.remark" ng-disabled="checked"></textarea>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label"></label>
          <div class="col-sm-4">
            <button type="button" class="btn btn-wide btn-primary">
              <a href="{{downloadUrl}}" class="xiazai">查看合同附件</a></button>
          </div>
        </div>
        <div class="form-group" style="margin-top: 80px" ng-show="role !='builder'">
          <label class="col-sm-3 control-label"></label>
          <div class="col-sm-8">
            <div class="col-sm-6 text-right">
              <button type="button" class="btn btn-wide btn-primary" ng-click="submit()">修改</button>
            </div>
            <div class="col-sm-6 text-left">
              <button type="button" class="btn btn-wide btn-warning" ng-click="cancel()">取消</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<script type="text/ng-template" id="projectTemplate.html">
  <div style="height:6px"></div>
  <qrcode version="5" error-correction-level="H" size="120"
          data="http://192.168.0.105:9000/#/account/login"></qrcode>
</script>
<script type="text/ng-template" id="contractTemplate.html">
  <div style="height:6px"></div>
  <qrcode version="5" error-correction-level="H" size="120"
          data="http://192.168.0.105:9000/#/account/login"></qrcode>
</script>